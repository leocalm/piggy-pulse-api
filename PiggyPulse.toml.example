# PiggyPulse API Configuration (Example)
#
# Copy this file to PiggyPulse.toml for local development.
# Environment variables take precedence over this file.
# Use PIGGY_PULSE_ prefix for env vars (e.g., PIGGY_PULSE_DATABASE__URL)

[database]
url = "postgres://user:password@localhost:5432/piggy_pulse_db"
max_connections = 16
min_connections = 4
connection_timeout = 5  # seconds
acquire_timeout = 5     # seconds

[server]
port = 8000
address = "127.0.0.1"

[api]
base_path = "/api/v1"
additional_base_paths = []
expose_docs = false

[cors]
allowed_origins = ["http://localhost:3000"]
allow_credentials = true

[logging]
level = "info"  # trace, debug, info, warn, error
json_format = false
slow_request_ms = 500   # warn threshold for slow requests (ms)
slow_query_ms = 100     # warn threshold for slow DB queries (ms)

[rate_limit]
read_limit = 300
mutation_limit = 60
auth_limit = 10
window_seconds = 60
cleanup_interval_seconds = 60
require_client_ip = true
use_forwarded_ip = false
forwarded_ip_header = "x-forwarded-for"
backend = "in_memory"
redis_url = "redis://127.0.0.1:6379/0"
redis_key_prefix = "piggy-pulse:rate_limit:"

[session]
ttl_seconds = 2592000
cookie_secure = true
